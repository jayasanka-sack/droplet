<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>
        Droplet-Login-Page
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
          name='viewport'/>
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css"
          href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="../assets/css/material-kit.css?v=2.0.3" rel="stylesheet"/>
<!--firebase-->
    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-auth.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyAia6DXR7EM7JdJ9UEI38piOfqEdnS0KX0",
            authDomain: "droplet-204301.firebaseapp.com",
            databaseURL: "https://droplet-204301.firebaseio.com",
            projectId: "droplet-204301",
            storageBucket: "droplet-204301.appspot.com",
            messagingSenderId: "658684640307"
        };
        firebase.initializeApp(config);
    </script>
<!--firebase-end-->

</head> 

<body class="signup-page sidebar-collapse">
<nav class="navbar navbar-transparent fixed-top navbar-expand-lg" color-on-scroll="100"
     id="sectionsNav">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" href="../index.html">Droplet </a>
        </div>
        <ul class="nav nav-pills">
            <li class="nav-item"><a style="font-size: 14px"  class="nav-link active" href="Register-page.html">Sign up</a></li>
        </ul>
    </div>
</nav>
<div class="page-header header-filter" filter-color="purple" style="background-image: url('../assets/img/city.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-md-10 ml-auto mr-auto">
                <div class="card card-signup">
                    <h2 class="card-title text-center">Login</h2>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12 mr-auto">
                                <div class="social text-center">
                                    <label class="form-check-label">
                                        Not a member yet?
                                        <a href="Register-page.html">Sign up</a>
                                    </label>
                                </div>

                                <!---------------------------------------------------form-start-------------------------------------------------------->
                                <form class="form" method="" action="">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="material-icons">mail</i>
                                                </span>
                                            </div>
                                            <input id="email" type="text" class="form-control" placeholder="Email...">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="material-icons">lock_outline</i>
                                                </span>
                                            </div>
                                            <input id="password" type="password" placeholder="Password..." class="form-control"/>
                                        </div>
                                    </div>
                                    <div class="form-group" style="position: relative;top: 20px;left: 30px">
                                        <label class="form-check-label">
                                            Forgot Password?
                                            <a href="psswd-reset-page.html">Reset it.</a>.
                                        </label>
                                    </div>
                                    <div class="text-center">
                                        <a href="#pablo" class="btn btn-primary btn-round" id="bttn-login">Get Started</a>
                                    </div>
                                </form>
                                <!---------------------------------------------------form-end-------------------------------------------------------->

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="container">
            <!--<nav class="float-left">-->
                <!--<ul>-->
                    <!--<li>-->
                        <!--<a href="about-page.html">-->
                            <!--Double Tape-->
                        <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a href="about-page.html">-->
                            <!--About Us-->
                        <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a href="https://blog.creative-tim.com">-->
                            <!--Blog-->
                        <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a href="https://www.creative-tim.com/license">-->
                            <!--Licenses-->
                        <!--</a>-->
                    <!--</li>-->
                <!--</ul>-->
            <!--</nav>-->
            <div class="copyright float-right">
                &copy;
                <script>
                    document.write(new Date().getFullYear())
                </script>
                , made with <i class="material-icons">favorite</i> by
                <a href="about-page.html" target="_blank">Team Double Tape</a> for a better future.
            </div>
        </div>
    </footer>
</div>
<!--   Core JS Files   -->
<script src="../assets/js/core/jquery.min.js" type="text/javascript"></script>
<script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="../assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
<script src="../assets/js/plugins/moment.min.js"></script>
<!--	Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
<script src="../assets/js/plugins/bootstrap-datetimepicker.js" type="text/javascript"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="../assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
<!-- Control Center for Now Ui Kit: parallax effects, scripts for the example pages etc -->
<script src="../assets/js/material-kit.js?v=2.0.3" type="text/javascript"></script>
<script>
    function toggleSignIn() {
        if (firebase.auth().currentUser) {
            // [START signout]
            firebase.auth().signOut();
            // [END signout]
        } else {
            var email = document.getElementById('email').value;
            var password = document.getElementById('password').value;
            if (email.length < 4) {
                alert('Please enter a valid email address.');
                return;
            }
            if (password.length < 4) {
                alert('Please enter a valid password.');
                return;
            }
            // Sign in with email and pass.
            // [START authwithemail]
            firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                // [START_EXCLUDE]
                if (errorCode === 'auth/wrong-password') {
                    alert('Wrong password.');
                } else {
                    alert(errorMessage);
                }
                console.log(error);
                // [END_EXCLUDE]
            });
            // [END authwithemail]
        }
    }


    /**
     * initApp handles setting up UI event listeners and registering Firebase auth listeners:
     *  - firebase.auth().onAuthStateChanged: This listener is called when the user is signed in or
     *    out, and that is where we update the UI.
     */
    function initApp() {
        // Listening for auth state changes.
        // [START authstatelistener]
        firebase.auth().onAuthStateChanged(function(user) {
            // [START_EXCLUDE silent]
            // [END_EXCLUDE]
            if (user) {
                // User is signed in.
                if (user.emailVerified) {
                    //Load user's Dashboard
                    window.location.href = '../../Dashboard/index.php';
                }else {
                    alert("Please verify your email to login");
                }
                // [END_EXCLUDE]
            }
            // [START_EXCLUDE silent]
            // [END_EXCLUDE]
        });
        // [END authstatelistener]
        document.getElementById('bttn-login').addEventListener('click', toggleSignIn, false);
    }

    window.onload = function() {
        initApp();
    };
</script>
</body>

</html>
