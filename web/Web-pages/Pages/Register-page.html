<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>
        Droplet-Register-Page
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
          name='viewport'/>
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css"
          href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="../assets/css/material-kit.css?v=2.0.3" rel="stylesheet"/>
    <!--firebase-->
    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-auth.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyAia6DXR7EM7JdJ9UEI38piOfqEdnS0KX0",
            authDomain: "droplet-204301.firebaseapp.com",
            databaseURL: "https://droplet-204301.firebaseio.com",
            projectId: "droplet-204301",
            storageBucket: "droplet-204301.appspot.com",
            messagingSenderId: "658684640307"
        };
        firebase.initializeApp(config);
    </script>
    <!--firebase-end-->
</head>

<body class="signup-page sidebar-collapse">
<nav class="navbar navbar-transparent fixed-top navbar-expand-lg" color-on-scroll="100"
     id="sectionsNav">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" href="../index.html">Droplet </a>
        </div>
        <ul class="nav nav-pills">
            <li class="nav-item"><a style="font-size: 14px"  class="nav-link active" href="login-page.html">Sign in</a></li>
        </ul>
    </div>
</nav>
<div class="page-header header-filter" filter-color="purple" style="background-image: url('../assets/img/bg7.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-md-10 ml-auto mr-auto">
                <div class="card card-signup">
                    <h2 class="card-title text-center">Register</h2>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12 mr-auto">
                                <div class="social text-center">
                                    <label class="form-check-label">
                                        Already Registered?
                                        <a href="login-page.html">Sign in</a>
                                    </label>
                                </div>

                                <!---------------------------------------------------form-start-------------------------------------------------------->
                                <form class="form" method="" action="">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="material-icons">face</i>
                                                 </span>
                                            </div>
                                            <input type="text" id="name" class="form-control" placeholder="Name...">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="material-icons">mail</i>
                                                </span>
                                            </div>
                                            <input type="text" id="email" class="form-control" placeholder="Email...">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="material-icons">lock_outline</i>
                                                </span>
                                            </div>
                                            <input type="password" id="password" placeholder="Password..." class="form-control"/>
                                        </div>
                                    </div>
                                    <div class="form-check">
                                        <label class="form-check-label">
                                            <input class="form-check-input" id="terms" type="checkbox" value="" checked>
                                            <span class="form-check-sign">
                                             <span class="check"></span>
                                            </span>
                                            I agree to the
                                            <a href="#something">terms and conditions</a>.
                                        </label>
                                    </div>
                                    <div class="text-center">
                                        <a href="#pablo" class="btn btn-primary btn-round" id="btn-sign-up">Get Started</a>
                                    </div>
                                </form>
                                <!---------------------------------------------------form-end-------------------------------------------------------->

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="container">
            <div class="copyright float-right">
                &copy;
                <script>
                    document.write(new Date().getFullYear())
                </script>
                , made with <i class="material-icons">favorite</i> by
                <a href="about-page.html" target="_blank">Team Double Tape</a> for a better future.
            </div>
        </div>
    </footer>
</div>
<!--   Core JS Files   -->
<script src="../assets/js/core/jquery.min.js" type="text/javascript"></script>
<script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="../assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
<script src="../assets/js/plugins/moment.min.js"></script>
<script>
    function handleSignUp() {
        var name = document.getElementById('name').value;
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        var terms = document.getElementById('terms').checked;
        if (name == "" || email == "" || password == "" || !terms){
            alert('Please fill up all the fields to register.')
        } else {
            if (email.length < 4) {
                alert('Please enter a valid email address.');
                return;
            }
            // Sign in with email and pass.
            // [START createwithemail]
            firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                // [START_EXCLUDE]
                if (errorCode == 'auth/weak-password') {
                    alert('The password is too weak.');
                } else {
                    alert(errorMessage);
                }
                console.log(error);
                // [END_EXCLUDE]
            });
            // [END createwithemail]
        }
    }

    function sendEmailVerification() {
        // [START sendemailverification]
        firebase.auth().currentUser.sendEmailVerification().then(function() {
            // Email Verification sent!
            // [START_EXCLUDE]
            alert('Email Verification Sent!');
            // [END_EXCLUDE]
        });
        // [END sendemailverification]
    }

    function initApp() {
        firebase.auth().signOut();//Stop automatically login in of pre registered users.
        // Listening for auth state changes.
        // [START authstatelistener]
        firebase.auth().onAuthStateChanged(function(user) {
            // [START_EXCLUDE silent]
            // [END_EXCLUDE]
            if (user) {
                // User is signed in.
                var displayName = user.displayName;
                var email = user.email;
                var emailVerified = user.emailVerified;
                var photoURL = user.photoURL;
                var isAnonymous = user.isAnonymous;
                var uid = user.uid;
                var providerData = user.providerData;
                // [START_EXCLUDE]
                alert(JSON.stringify(user, null, '  '))
                // [END_EXCLUDE]
                sendEmailVerification();//send a verification for newly registered users
                window.open("Verification-page.html","_self");
            }
        });
        // [END authstatelistener]
        document.getElementById('btn-sign-up').addEventListener('click', handleSignUp, false);
    }

    window.onload = function() {
        initApp();
    };
</script>
</body>

</html>
